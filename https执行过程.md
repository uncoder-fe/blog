---
title: "Https过程"
description: ""
date: 2018-05-15T11:12:25+08:00
author: "uncoder"
tags: []
categories: ["其他"]
slug: ""
---

哟，怎么抓包啊.

<!--more-->

# 请求过程

1. 客户端请求
2. 服务器响应发送证书（包含服务器公钥）
3. 客户端校验证书，OK 生成随机值（客户端钥匙，不区分公私了），然后通过证书的公钥加密发送给服务器
4. 服务器私钥解析出随机值（客户端钥匙）
5. 后面通过随机值进行对称加密传输（随机值只有服务器和客户端知道）

# 中间人攻击

客户端打开服务器页面，获取CA证书，证书在传输途中，被Charles拦截公钥。
Charles自己创建的公钥，给了客户端，客户端误以为是服务器的证书，然后和Charles进行消息通信。
Charles自己和客户端通信，并把客户端的消息（可以修改），二次转发给服务器。

