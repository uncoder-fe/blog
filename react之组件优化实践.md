---
date: "2018-04-03T11:50:57+08:00"
description: ""
title: "react组件开发优化实践"
slug: ""
categories: ["javascript"]
tags: []
author: "uncoder"
---

再过一段时间就要淘汰了、

<!--more-->

> _代码写的越久，越感觉用奇淫绝技的人2_

# 2018-05-09更新

1. 又被别人代码伤到了，公共组件不耦合业务逻辑，最小组件的拆分是要思考的。
2. 关于组件懒加载，可能会造成代码上的覆盖（样式啥的）

# 2018-04-16更新

子组件应该暴露属性（样式、函数）接收，增强可扩展能力，但不能暴漏太多需要判定的属性（否则会很恶心）。

# 2018-04-03更新

react的最佳实践，减少state使用。

# 组件构成

1，父组件
2，子组件(控制面板)
2，子组件(渲染面板)

# 消息传递

父组件=>子组件(控制面板)
父组件=>子组件(渲染面板)
子组件(控制面板)=>父组件子组件(渲染面板)=>父组件

# 第一个版本

由`shouldComponentUpdate`来接收父组件的消息，比对判断复杂

# 第二个版本

由`componentWillReceiveProps`来接收父组件的消息

# 第三个版本

通过`key`的变化来重置组件，由`componentDidMount`和`componentWillReceiveProps`配合来接收父组件的消息。

# 第四个版本

前端放弃 base64 生成图片，改为服务器合成，交换坐标点

# 备注

1. 减少不必要的操作
1. 由图片改成像素点处理
1. 服务器合成图片，增加请求、