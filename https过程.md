---
title: "Https过程"
description: ""
date: 2018-05-15T11:12:25+08:00
author: "uncoder"
tags: []
categories: ["其他"]
slug: ""
---

哟，怎么抓包啊.

<!--more-->

# 请求过程

1. 客户端请求
2. 服务器响应发送证书（包含服务器公钥）
3. 客户端校验证书，OK生成随机值（客户端钥匙，不区分公私了），然后通过证书的公钥加密发送给服务器
4. 服务器私钥解析出随机值（客户端钥匙）
5. 后面通过随机值进行对称加密传输（随机值只有服务器和客户端知道）

# 中间人攻击

要拦截解析https请求的话，要实施中间人攻击。正常情况下中间人攻击无法通过客户端的证书校验，`Charles/mitmproxy`的做法是临时实时的生成自己的证书，但这临时的证书要被客户端信任，就只能在iPhone设备上安装一个被信任的CA来签发临时的证书，这样手机上很多App自以为安全的https连接通道都不再安全了，你的Safari通过https浏览的网页内容也可能被窃听了。
